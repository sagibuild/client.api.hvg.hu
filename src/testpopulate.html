<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>changePage JSON Sample</title>
    <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
    <script>
        var categoryData = {
            itthon: {
                Name: "Itthon",
                Description: "A rovat",
                WebId: "itthon",
                Id: 1251,
                ParentWebId: ""
            },
            vilag: {
                Name: "Vil치g",
                Description: "B rovat",
                WebId: "vilag",
                Id: 1252,
                ParentWebId: ""
            },
            tudomany: {
                Name: "Tudom치ny",
                Description: "C rovat",
                WebId: "tudomany",
                Id: 1253,
                ParentWebId: ""
            }
        };

        function showCategory( urlObj, options )
        {
            var categoryWebId = urlObj.hash.replace( /.*category=/, "" );
            var category = categoryData[categoryWebId];
            var pageSelector = urlObj.hash.replace( /\?.*$/, "" );

            if ( category ) {
                var $page = $( pageSelector ),
                        $header = $page.children( ":jqmData(role=header)" ),
                        $content = $page.children( ":jqmData(role=content)" ),
                        markup = "<p>" + category.Description + "</p><ul data-role='listview' data-inset='true'>";
                        //cItems = category.items,
                        //numItems = cItems.length;

                //for ( var i = 0; i < numItems; i++ ) {
                //    markup += "<li>" + cItems[i].name + "</li>";
               // }
                markup += "</ul>";
                $header.find( "h1" ).html( category.Name );
                $content.html( markup );
                $page.page();

                $content.find( ":jqmData(role=listview)" ).listview();

                options.dataUrl = urlObj.href;
                $.mobile.changePage( $page, options );
            }
        }

        $(document).bind( "pagebeforechange", function( e, data ) {
            //alert(data);
            if ( typeof data.toPage === "string" ) {
                var u = $.mobile.path.parseUrl( data.toPage ),
                        re = /^#category-item/;
                if ( u.hash.search(re) !== -1 ) {
                    showCategory( u, data.options );
                    e.preventDefault();
                }
            }
        });
    </script>
</head>

<body>
<!-- Source: http://jquerymobile.com/demos/1.2.0/docs/pages/page-dynamic.html -->
<div id="home" data-role="page">
    <div data-role="header"><h1>Categories</h1></div>
    <div data-role="content">
        <h2>Select a Category Below:</h2>
        <ul data-role="listview" data-inset="true">
            <li><a href="#category-items?category=itthon">Itthon</a></li>
            <li><a href="#category-items?category=vilag">Vil치g</a></li>
            <li><a href="#category-items?category=tudomany">Tudom치ny</a></li>
        </ul>
    </div>

</div>
<div id="category-items" data-role="page">
    <div data-role="header">
        <a href="#home" data-direction="reverse" data-iconpos="notext" data-role="button" data-icon="arrow-l" data-iconpos="left" data-inline="true"></a>
        <h1></h1>
    </div>
    <div data-role="content"></div>
</div>
</body>
</html>
